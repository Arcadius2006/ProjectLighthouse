@using LBPUnion.ProjectLighthouse.Helpers
@using LBPUnion.ProjectLighthouse.Types
@model LBPUnion.ProjectLighthouse.Pages.Layouts.BaseLayout

@{
    Model!.User = await Model.Database.UserFromWebRequest(Model.Request);

    if (Model.User == null)
    {
        Model.NavigationItems.Add(new PageNavigationItem("Register", "/register"));
        Model.NavigationItems.Add(new PageNavigationItem("Log in", "/login"));
    }
    else
    {
        Model.NavigationItems.Add(new PageNavigationItem("Authentication", "/authentication"));
        Model.NavigationItems.Add(new PageNavigationItem("Log out", "/logout")); // should always be last
    }
}

<!DOCTYPE html>

<html lang="en">
<head>
    <title>Project Lighthouse</title>
</head>
<header>
    <nav>
        @foreach (PageNavigationItem navigationItem in Model!.NavigationItems)
        {
            <a href="@navigationItem.Url">@navigationItem.Name</a>
        }
    </nav>
</header>
<body>
@RenderBody()
</body>
<footer>
    <p>Page generated by @GitVersionHelper.FullVersion</p>
    @if (GitVersionHelper.IsDirty)
    {
        <p>This page was generated using a modified version of Project Lighthouse. Please make sure you are properly disclosing the source code to any users who may be using this instance.</p>
    }
</footer>
</html>